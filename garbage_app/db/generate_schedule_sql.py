from datetime import date, timedelta

# スケジュールパターン（5地区）
schedule_pattern = {
    "西地区B": {
        "月": [("スプレー・ビン", [4, 18]), ("古紙・古布", [11, 25])],
        "火": [("燃やせるごみ", "毎週")],
        "水": [("プラ", [6, 13, 20, 27]), ("かん", [6, 20]), ("粗大", [13, 27])],
        "木": [("ペットボトル", [7, 21]), ("燃やせないごみ", [14, 28])],
        "金": [("燃やせるごみ", "毎週")]
    },
    "北地区": {
        "月": [("燃やせるごみ", "毎週")],
        "火": [("スプレー・ビン", [5, 19]), ("ペットボトル", [12, 26])],
        "水": [("古紙・古布", [13, 27]), ("燃やせないごみ", [6, 20])],
        "木": [("燃やせるごみ", "毎週")],
        "金": [("プラ", [1, 8, 15, 22]), ("かん", [8, 22]), ("粗大", [1, 15])]
    },
    "西地区A": {
        "月": [("古紙・古布", [4, 18]), ("スプレー・ビン", [11, 25])],
        "火": [("燃やせるごみ", "毎週")],
        "水": [("プラ", [6, 13, 20, 27]), ("かん", [6, 20]), ("粗大", [13, 27])],
        "木": [("ペットボトル", [7, 21]), ("燃やせないごみ", [14, 28])],
        "金": [("燃やせるごみ", "毎週")]
    },
    "東地区": {
        "月": [("燃やせるごみ", "毎週")],
        "火": [("スプレー・ビン", [4, 18]), ("古紙・古布", [11, 25])],
        "水": [("プラ", [6, 13, 20, 27]), ("粗大", [6, 20]), ("かん", [13, 27])],
        "木": [("燃やせないごみ", [7, 21]), ("ペットボトル", [4, 28])],
        "金": [("燃やせるごみ", "毎週")]
    },
    "南地区": {
        "月": [("燃やせるごみ", "毎週")],
        "火": [("ペットボトル", [5, 19]), ("燃やせないごみ", [12, 26])],
        "水": [("スプレー・ビン", [13, 27]), ("古紙・古布", [6, 20])],
        "木": [("燃やせるごみ", "毎週")],
        "金": [("プラ", [1, 8, 15, 22]), ("粗大", [8, 22]), ("かん", [1, 15])]
    }
}

# 期間指定（2025年8月）
start_date = date(2025, 8, 1)
end_date = date(2025, 8, 31)
delta = timedelta(days=1)

# 曜日マッピング
week_map = {0: "月", 1: "火", 2: "水", 3: "木", 4: "金", 5: "土", 6: "日"}

# SQL文出力先ファイル
output_file = "schedule_insert.sql"

with open(output_file, "w", encoding="utf-8") as f:
    d = start_date
    while d <= end_date:
        weekday = week_map[d.weekday()]
        for area, rules in schedule_pattern.items():
            if weekday in rules:
                for gomi_type, rule in rules[weekday]:
                    if rule == "毎週" or d.day in rule:
                        sql = f"INSERT INTO garbage_schedule (classification, date, gomi_type) VALUES ('{area}', '{d.strftime('%Y-%m-%d')}', '{gomi_type}');\n"
                        f.write(sql)
        d += delta

print("schedule_insert.sql を生成しました。")
